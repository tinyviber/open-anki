{
	"name": "Debian",
	"image": "mcr.microsoft.com/devcontainers/base:bullseye",
	"features": {
		"ghcr.io/shyim/devcontainers-features/bun:0": {},
		"ghcr.io/devcontainers-extra/features/supabase-cli:1": {},
		"ghcr.io/devcontainers/features/node:1": {
			"version": "lts"
		},
		"ghcr.io/devcontainers/features/docker-in-docker:2": {
            "moby": "false", // 禁用 D-i-D，而是使用宿主机
            "enableNonRootDocker": "true" // 自动配置非 Root 用户的权限
        }
	},
	"postCreateCommand": "bun install -g pm2 && echo 'export PATH=$PATH:/home/vscode/.bun/bin' >> /home/vscode/.bashrc",
	"postStartCommand": "supabase start && supabase status -o env --override-name db.url=DATABASE_URL --override-name auth.jwt_secret=SUPABASE_JWT_SECRET --override-name auth.anon_key=SUPABASE_ANON_KEY --override-name auth.service_role_key=SUPABASE_SERVICE_ROLE_KEY > supabase/.env"
}
